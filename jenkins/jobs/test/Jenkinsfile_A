
pipeline {

	agent {
		node {
			label 'cicd_microservice'
		}
	}

  options {
  	ansiColor('xterm')
  }

  stages{

  	stage('set_params'){

  		steps{
  			script {

                    // Variables for input
                    //def inputConfig
                    //def inputTest

                    // Get the input
                    def userInput = input(
                            id: 'userInput', message: 'Enter path of test reports:?',
                            parameters: [

                                    extendedChoice(name: 'Environment', 
									     defaultValue: 'dev',
										 multiSelectDelimiter: ',',
										 quoteValue: false,
										 saveJSONParameterToFile: false,
										 type: 'PT_SINGLE_SELECT',
										 value: 'dev,qa',
										 visibleItemCount: 5),
									
                                    string(defaultValue: 'None',
                                            description: 'Test Info file',
                                            name: 'Test'),
                            ])

                    // Save to variables. Default to empty string if not found.
                    env.ENVIRONMENT = userInput.Environment?:''
                    env.TEST = userInput.Test?:''

                }
  		}

  	}

  	stage('echo_params'){

  		steps{
  			script {

                    // Echo to console
					echo("Variables:")
                    echo("Environment: ${ENVIRONMENT}")
                    echo("Test: ${TEST}")

                }
  		}

  	}

  }
  post {

	cleanup {
	
		cleanWs()
    
	}

  }
}